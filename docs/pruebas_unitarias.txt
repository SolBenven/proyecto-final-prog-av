Una prueba unitaria es una prueba automatizada cuyo objetivo es verificar el funcionamiento correcto de una parte pequeña del código, también llamada unidad. Existen distintos matices en la definición de prueba unitaria y estas diferencias han dado lugar a dos enfoques principales: la escuela clásica y la escuela de Londres. La escuela clásica es el enfoque original con el que surgieron las pruebas unitarias y el desarrollo guiado por pruebas. La escuela de Londres se desarrolló posteriormente, principalmente en la comunidad de programación de esa ciudad. Ambos enfoques difieren en la forma de aislar las unidades y tratar las dependencias, pero coinciden en los principios básicos.

Más allá de estas diferencias, una prueba unitaria se caracteriza por tres aspectos fundamentales: verifica un fragmento pequeño de código, se ejecuta de forma rápida y se realiza de manera aislada, es decir, sin depender de otros componentes del sistema. El código que se prueba suele denominarse MUT cuando se trata de un método bajo prueba (Method Under Test) o SUT cuando se refiere al sistema o clase bajo prueba (System Under Test). En la práctica, ambos términos suelen utilizarse como sinónimos.

Para estructurar una prueba unitaria se utiliza comúnmente el patrón AAA, que divide la prueba en tres etapas: preparar, actuar y verificar. En la etapa de preparación se configura el sistema bajo prueba y sus dependencias en el estado necesario. En la etapa de actuación se ejecuta el método o comportamiento que se desea probar y se captura su resultado. En la etapa de verificación se comprueba que el resultado obtenido sea el esperado, ya sea mediante valores de retorno, cambios en el estado del sistema o interacciones con otros objetos.

Generalmente se comienza escribiendo la etapa de preparación, aunque en algunos enfoques como el desarrollo guiado por pruebas resulta útil comenzar por la verificación, definiendo primero el comportamiento esperado. En este caso, se escribe una prueba que inicialmente falla y luego se desarrolla el código necesario para que dicha prueba pase.

Una parte importante del diseño de pruebas unitarias es la elección de nombres claros y expresivos. Existen convenciones habituales que combinan el nombre del método bajo prueba, el escenario evaluado y el resultado esperado. Sin embargo, se recomienda no ser excesivamente rígido con estas convenciones y priorizar nombres que describan el comportamiento esperado de forma comprensible, incluso para personas que no sean programadoras pero conozcan el dominio del problema.

En Python, el desarrollo de pruebas unitarias cuenta con soporte dentro de la Biblioteca Estándar a través del módulo unittest. Este módulo permite automatizar la ejecución de pruebas, agruparlas, inicializar y limpiar recursos compartidos, y mantener independencia entre las pruebas y la infraestructura que reporta los resultados. unittest se basa en un enfoque orientado a objetos y define varios conceptos clave.

Un fixture de prueba representa la preparación necesaria antes de ejecutar una o más pruebas y las acciones de limpieza posteriores. Esto puede incluir la creación de recursos temporales como archivos, bases de datos o procesos. Un caso de prueba es la unidad mínima de prueba y verifica la respuesta del sistema ante un conjunto específico de entradas. En unittest, los casos de prueba se definen creando clases que heredan de TestCase, la cual proporciona métodos de aserción para validar los resultados. Un conjunto de pruebas, o test suite, es una colección de casos de prueba que se ejecutan en conjunto. El ejecutor de pruebas, o test runner, es el componente encargado de ejecutar las pruebas y reportar los resultados, ya sea mediante una salida por consola, una interfaz gráfica o un valor de retorno.

Además de las herramientas incluidas en la Biblioteca Estándar, existen herramientas externas para analizar la calidad de las pruebas. Una de las más utilizadas es Coverage.py, que permite medir la cobertura de código, es decir, qué partes del programa son ejecutadas durante las pruebas y cuáles no. Esta herramienta se instala mediante el comando pip install coverage. Para ejecutar las pruebas con medición de cobertura utilizando unittest se utiliza el comando coverage run -m unittest discover, que debe ejecutarse en la carpeta del proyecto. Este comando busca automáticamente los archivos de prueba cuyos nombres comienzan con “test_”, ejecuta las pruebas y genera un reporte de cobertura. Dicho reporte puede visualizarse en la consola mediante el comando coverage report -m.
